bx fetch-balance 2MwGGufthfjcGKA8KB4vSXoAHHVBJsezJy8

bx fetch-tx 2a0990b736e79e1d65ce3e9e25427e36855235829d58c1f2a9eac18142c926a6

transaction
{
    hash 2a0990b736e79e1d65ce3e9e25427e36855235829d58c1f2a9eac18142c926a6
    inputs
    {
        input
        {
            address_hash 43da33b4013c107ec381f126afbfb172e0e25b9b
            previous_output
            {
                hash 5a6c2627f80c4aad2f383c2245aadd5bf267313648691b063a95bf91becc4c0b
                index 1
            }
            script "[3045022100e56d3295de26496c476e926037166bc1094711c593e87490c8b9ed8ed7809892022039f39edee7fc893a8e0500585da9926ccca94cf8b598dfa2bd080d1133c1d8e001] [0314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1d]"
            sequence 4294967294
        }
    }
    lock_time 0
    outputs
    {
        output
        {
            address_hash 2c135b63577126ac7164804aa40eb148ce934173
            script "hash160 [2c135b63577126ac7164804aa40eb148ce934173] equal"
            value 900000
        }
    }
    version 0
}

input for the new transaction will be:
2a0990b736e79e1d65ce3e9e25427e36855235829d58c1f2a9eac18142c926a6:0

the output for the new transaction will be:
n4eaAFB3GPmrJR4ummYpQmYTx2VaNftuPe 800000


bx tx-encode -i 2a0990b736e79e1d65ce3e9e25427e36855235829d58c1f2a9eac18142c926a6:0 -o n4eaAFB3GPmrJR4ummYpQmYTx2VaNftuPe:800000

0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a0000000000ffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000


bx tx-decode 0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a0000000000ffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000

transaction
{
    hash 51d247215c10a6b600b81ad3173a1a56af292849a0356b28c275a04a9444855e
    inputs
    {
        input
        {
            previous_output
            {
                hash 2a0990b736e79e1d65ce3e9e25427e36855235829d58c1f2a9eac18142c926a6
                index 0
            }
            script ""
            sequence 4294967295
        }
    }
    lock_time 0
    outputs
    {
        output
        {
            address_hash fdbbbe6062fef2fca812e404e3dcb43dcdb41088
            script "dup hash160 [fdbbbe6062fef2fca812e404e3dcb43dcdb41088] equalverify checksig"
            value 800000
        }
    }
    version 1
}

Notice that transactions.inputs[0].script is empty. This means that the input has not been endorsed.

Create the first endorsement for the first input 51d247215c10a6...:0 of the new transaction, using the first private key, the multisig script and the new transaction.


bx input-sign 156bc5c6f50244b6745e7280671697e8eb703a81a7daf1180ec65d957bff429e "[c4684560] checklocktimeverify drop [0314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1d] checksig" 0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a0000000000ffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000

3045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b601

Encode the multisig script, for embedding in the endorsement script.

bx script-encode "[c4684560] checklocktimeverify drop [0314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1d] checksig"

04c4684560b175210314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1dac

Create an endorsement script using the endorsement and the encoded script, and assign it to the first input of the transaction.

bx input-set "zero [3045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b601] [04c4684560b175210314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1dac]" 0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a0000000000ffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000

0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a000000007500483045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b6012a04c4684560b175210314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1dacffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000

bx tx-decode 0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a000000007500483045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b6012a04c4684560b175210314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1dacffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000

transaction
{
    hash 95d5b2d13c7254b24365aff90922aaa5150bb51456279fe1be60d1df575ed633
    inputs
    {
        input
        {
            address_hash 2c135b63577126ac7164804aa40eb148ce934173
            previous_output
            {
                hash 2a0990b736e79e1d65ce3e9e25427e36855235829d58c1f2a9eac18142c926a6
                index 0
            }
            script "zero [3045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b601] [04c4684560b175210314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1dac]"
            sequence 4294967295
        }
    }
    lock_time 0
    outputs
    {
        output
        {
            address_hash fdbbbe6062fef2fca812e404e3dcb43dcdb41088
            script "dup hash160 [fdbbbe6062fef2fca812e404e3dcb43dcdb41088] equalverify checksig"
            value 800000
        }
    }
    version 1
}


Notice that the endorsement script has been applied to transaction.inputs[0].script and that transaction.hash has been updated.


Validate the endorsement of the transaction's first input, using the public key, multisig script, first endorsement and transaction (optional).

bx input-validate 0314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1d "[c4684560] checklocktimeverify drop [0314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1d] checksig" 3045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b601 0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a000000007500483045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b6012a04c4684560b175210314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1dacffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000

The endorsement is valid

Validate the transaction against the blockchain (optional).

bx validate-tx 0100000001a626c94281c1eaa9f2c1589d82355285367e42259e3ece651d9ee736b790092a000000007500483045022100d579184b19092eea1af0a01ab1d99e2432fb2e0fe06c5c171cd5e1a39d965fd402200c3597cedc6ea1d0fdabdd442f4dcb5799f7dce3ea097d667976b5c671e422b6012a04c4684560b175210314488ebfec9889c4253fe2d1a21715b932864d2892193e4ca60e0acbd1d9fd1dacffffffff0100350c00000000001976a914fdbbbe6062fef2fca812e404e3dcb43dcdb4108888ac00000000

op_check_locktime_verify2


